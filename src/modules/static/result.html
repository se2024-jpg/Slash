<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css?family=Acme|Open+Sans:400,700|Source+Sans+Pro:400,600,700" rel="stylesheet');

    html {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    * {
      margin: 0;
      padding: 0;
    }

    body {
      background: #101010;
      font-family: 'Open Sans', sans-serif;
    }

    nav.bg-transparent {
      background: transparent;
      transition: all .3s ease;
    }

    nav.navbar.navbar-expand-md.bg-dark.navbar-dark.fixed-top:hover {
      background: #171719a3 !important;
    }

    nav ul {
      transition: all .6s ease;
    }

    nav ul li.nav-item a {
      color: #f1f1f1 !important;
      font-family: 'Open Sans', sans-serif;
      transition: all .3s ease;
    }

    nav ul li.nav-item a:hover {
      color: #3498DB !important;
    }

    @media only screen and (min-width: 992px) {
      .nav-scroll {
        margin: 0 35px;
        transition: all .6s ease;
      }

      .logo {
        display: block !important;
        transition: all .9s ease;
      }
    }

    @media only screen and (max-width: 992px) {
      img#logo {
        display: none !important;
      }
    }


    .bg-menu {
      background: #171719a3 !important;
    }

    img#logo {
      margin-top: 30px;
      padding: 0 10px;
      position: absolute;
      display: none;
      transition: all .9s ease;

    }

    .conten-title {
      position: absolute;
      left: 0;
      right: 0;
      top: 10%;
    }


    h2 {
      font-family: 'Acme', sans-serif;
      font-size: 2.4em;
      text-align: center;
      text-transform: uppercase;
      color: #f2f2f2;
    }

    h2 img {
      margin-right: 20px;
    }

    .slogan {
      text-align: center;
      color: #f2f2f2;
      font-size: 15px;
      margin-top: 5px;
    }

    main {
      position: relative;
    }

    main .centen-des {
      margin-top: 10px;
      padding: 16px 10px;
      border-top: 4px solid #3498DB;
      background: #fff;
    }

    footer {
      background: #121213de;
      padding: 10px;
      text-align: center;
      color: #f2f2f2;
      font-size: 13px;
    }

    footer a {
      color: #f2f2f2;
      text-decoration: none;
    }

    @import url(https://fonts.googleapis.com/css?family=Cabin:400);

    .webdesigntuts-workshop {
      height: 100%;
      text-align: center;
      width: 100%;
    }

    .webdesigntuts-workshop form {
      display: inline-block;
      font-size: 0px;
      padding: 20px;
      position: static;
      z-index: 1;
    }

    .webdesigntuts-workshop input {
      background: #222;
      background: linear-gradient(#333, #222);
      border: 1px solid #444;
      border-radius: 5px 0 0 5px;
      box-shadow: 0 2px 0 #000;
      color: #888;
      display: block;
      float: left;
      font-family: 'Cabin', helvetica, arial, sans-serif;
      font-size: 13px;
      font-weight: 400;
      height: 40px;
      margin: 0;
      padding: 0 10px;
      text-shadow: 0 -1px 0 #000;
      width: 200px;
    }

    .ie .webdesigntuts-workshop input {
      line-height: 40px;
    }

    .webdesigntuts-workshop input::-webkit-input-placeholder {
      color: #888;
    }

    .webdesigntuts-workshop input:-moz-placeholder {
      color: #888;
    }

    .webdesigntuts-workshop input:focus {
      animation: glow 800ms ease-out infinite alternate;
      background: #222922;
      background: linear-gradient(#333933, #222922);
      border-color: #393;
      box-shadow: 0 0 5px rgba(0, 255, 0, .2), inset 0 0 5px rgba(0, 255, 0, .1), 0 2px 0 #000;
      color: #efe;
      outline: none;
    }

    .webdesigntuts-workshop input:focus::-webkit-input-placeholder {
      color: #efe;
    }

    .webdesigntuts-workshop input:focus:-moz-placeholder {
      color: #efe;
    }

    .webdesigntuts-workshop button {
      background: #222;
      background: linear-gradient(#333, #222);
      box-sizing: border-box;
      border: 1px solid #444;
      border-left-color: #000;
      border-radius: 0 5px 5px 0;
      box-shadow: 0 2px 0 #000;
      color: #fff;
      display: block;
      float: left;
      font-family: 'Cabin', helvetica, arial, sans-serif;
      font-size: 13px;
      font-weight: 400;
      height: 40px;
      line-height: 40px;
      margin: 0;
      padding: 0;
      position: relative;
      text-shadow: 0 -1px 0 #000;
      width: 80px;
    }

    .webdesigntuts-workshop button:hover,
    .webdesigntuts-workshop button:focus {
      background: #292929;
      background: linear-gradient(#393939, #292929);
      color: white;
      outline: none;
    }

    .webdesigntuts-workshop button:active {
      background: #292929;
      background: linear-gradient(#393939, #292929);
      box-shadow: 0 1px 0 #000, inset 1px 0 1px #222;
      top: 1px;
    }

    @keyframes glow {
      0% {
        border-color: white;
        box-shadow: 0 0 5px rgba(0, 255, 0, .2), inset 0 0 5px rgba(0, 255, 0, .1), 0 2px 0 #000;
      }

      100% {
        border-color: white;
        box-shadow: 0 0 20px rgba(244, 245, 244, 0.6), inset 0 0 10px rgba(240, 244, 240, 0.4), 0 2px 0 #000;
      }
    }

    .item-list {
      text-align: center;
      width: 100%;
      margin-top: 20px;
      padding: 5px 5px 5px 5px;
    }

    .td,
    th {
      border: 1px solid;
      padding: 7px;
    }

    .item-list tr:nth-child(odd) {
      background-color: rgb(23, 22, 23);
      color: whitesmoke;

    }

    .item-list tr:nth-child(even) {
      background-color: rgb(23, 22, 23);
      color: whitesmoke;

    }

    .col-sm {
      padding-top: 25px;

    }

    .results {
      padding-left: 60px;
      width: 3500px;

    }

    .button {
      border: none;
      color: rgb(12, 11, 11);
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      transition-duration: 0.4s;
      cursor: pointer;
    }

    .button1 {
      background-color: rgb(11, 11, 11);
      color: rgb(250, 247, 247);
      border: 2px solid #4a4d4a;

    }

    #choice1 {
      width: 160px;

    }

    .button1:hover {
      background-color: rgb(14, 14, 14);
      color: rgb(243, 236, 236);
    }

    .heart-icon::before {
      content: "\2665";
      font-size: 24px;
      color: white;
    }

    .clicked-heart{
      color: red;
    }

    .heart-link {
      text-decoration: none;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: auto;
    }

    .form-group input,
    .form-group select {
      margin-top: auto;
    }
    .grid {
    margin: 50px auto;
    padding-bottom: 10px;
    ;
    display: flex;
    flex-wrap: wrap;
    width: 1200px;
    height: auto;
}

.card-wrapper{
    max-width: 380px;
    position: relative;
    box-shadow: 0 2px 5px #333;
    margin: 0 auto;
    background: #222831;
    width: 400px;
    margin: 10px;
    padding: 10px;
    word-wrap: break-word;
}

.card-cheap-wrapper{
    max-width: 380px;
    position: relative;
    box-shadow: 0 2px 5px #333;
    margin: 0 auto;
    background: #FFFFFF;
    width: 400px;
    margin: 10px;
    padding: 10px;
    word-wrap: break-word;
}
    
.card-img-holder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 300px;
}

.card-img {
    max-width: 100%;
    max-height: 100%;
}

.card-content {
    padding: 30px;
}

.card-website {
    display: block;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    color: #9DAAF2;
    margin-bottom: 18px;
}

.card-content h4{
    font-weight: 500;
    display: block;
    margin-bottom: 18px;
    color: #5BE0D8;
    text-decoration: none;
}


.card-content p {
    font-size: 15px;
    line-height: 22px;
    margin-bottom: 18px;
    color: #EEEEEE;
}

.card-cheap-content p {
    font-size: 15px;
    line-height: 22px;
    margin-bottom: 18px;
    color: #000000;
}

.card-bottom {
    overflow: hidden;
    border-top: 1px solid #99DDFF;
    padding-top: 20px;
}

.card-bottom div {
    float: left;
    width: 50%;
}

.card-rating {
    font-size: 18px;
    color: #F52544;
    font-weight: 600;
}

.card-buttons {
    text-align: right;
}

.card-buttons a {
    display: inline-block;
    margin-left: 5px;
    color: #5CE0D8;
    font-size: 17px;
}

.card-buttons a:hover {
    color: #F52544;
}
  </style>
  <title>Searching</title>
</head>

<body data-spy="scroll" data-target="#efec-scroll" data-offset="10">
  <nav id="efec-scroll" class="navbar navbar-expand-md bg-dark navbar-dark fixed-top bg-transparent">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-center" id="collapsibleNavbar">
      <ul id="ulone" class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="login">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="wishlist">Wishlist</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
      </ul>

      <img
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/France.tv_Slash.svg/1423px-France.tv_Slash.svg.png"
        alt="" id="logo" class="" width="5%">

      <ul id="ultwu" class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Welcome {{ session['username'] }}</a>
        </li>
        <li class="nav-item">
        </li>
        <li class="nav-item">
          <a class="nav-link" href={{ url_for('logout') }}>Logout</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="conten-title">
      <h2><img
          src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/France.tv_Slash.svg/1423px-France.tv_Slash.svg.png"
          alt="logo" width="3%">
      </h2>
      <section class="webdesigntuts-workshop">
        <form action="/search" method="GET">
          <input type="text" name="product_name" placeholder="What are you looking for?">
          <button type="submit">Search</button>
        </form>
        <br>
      </section>
    </div>
    <br><br><br><br> <br><br><br><br>
  </div>
 <div class="container" id="abc">
    <div class="row gx-3 align-items-end">
      <div class="col-sm">
        <form action="/filter?product_name={{prod}}" method="post" id="filter1" class="d-flex justify-content-between">
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <select id="choice1" name="sort" class="form-control">
              <option value="default">Sort By</option>
              <option value="rades">Rating High to Low</option>
              <option value="raasc">Rating Low to High</option>
              <option value="pasc">Price Low to High</option>
              <option value="pdes">Price High to Low</option>
            </select>
          </div>
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <select id="choice1" name="currency" class="form-control">
              <option value="usd">USD</option>
              <option value="inr">INR</option>
              <option value="euro">EURO</option>
              <option value="yuan">YUAN</option>
              <option value="aud">AUD</option>
              <option value="pound">POUND</option>
            </select>
          </div>
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <input type="number" step="0.1" min="0" id="amount_min" name="min_rating" placeholder="Min Rating"
              class="form-control" style="border-radius: 7px; height: 44px;">
          </div>
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <input type="number" step="0.01" min="0" id="amount_min" name="min_price" placeholder="Min Price"
              class="form-control" style="border-radius: 7px; height: 44px;">
          </div>
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <input type="number" step="0.01" min="0" id="amount_max" name="max_price" placeholder="Max Price"
              class="form-control" style="border-radius: 7px; height: 44px;">
          </div>
          <div class="form-group">
            <label class="control-label" for="company"></label>
            <input type="submit" style="border-radius: 7px; height: 34px;" class="button button1" value="Search" />
          </div>
        </form>
      </div>
    </div>
    <hr>
  </div>
  <br>
  <div class="grid">
      {% for product in data | sort(attribute='price') %}
          <script>
             var jsonData = '{{ product | tojson | safe }}';
          </script>
          {% if loop.first %}
          <div class="card-cheap-wrapper">
            <div class="card-img-holder">
                <img class="card-img" src="{{product.img_link}}">
            </div>
            <div class="card-content card-cheap-content">
                <span class="card-website">{{product.website}}</span>
                <h4>{{product.price}}</h4>
                <p>{{product.title}}</p>
                <div class="card-bottom">
                    <div class="card-rating">Rating: {{product.rating}}</div>
                    <div class="card-buttons">
                        <a href="{{product.link}}"><i class="fa fa-link"></i></a>
                        <a href="#" id="heart-link" onclick="addToCart(this, jsonData)"><i class="fa fa-heart"></i></a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

    {% endfor %}
    {% for product in data %}
          <script>
             var jsonData = '{{ product | tojson | safe }}';
          </script>
          <div class="card-wrapper">
            <div class="card-img-holder">
                <img class="card-img" src="{{product.img_link}}">
            </div>
            <div class="card-content">
                <span class="card-website">{{product.website}}</span>
                <h4>{{product.price}}</h4>
                <p>{{product.title}}</p>
                <div class="card-bottom">
                    <div class="card-rating">Rating: {{product.rating}}</div>
                    <div class="card-buttons">
                        <a href="{{product.link}}"><i class="fa fa-link"></i></a>
                        <a href="#" id="heart-link" onclick="addToCart(this, jsonData)"><i class="fa fa-heart"></i></a>
                    </div>
                </div>
            </div>
        </div>

    {% endfor %}
    
  </div>
    <div class="col-md-4"></div>
  </div>

  </header>



  <script type="text/javascript" src="{{ url_for('static', filename='grid.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

  <script>
    !function (a) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery) }(function (a) { "use strict"; function b(a) { if (a instanceof Date) return a; if (String(a).match(g)) return String(a).match(/^[0-9]*$/) && (a = Number(a)), String(a).match(/\-/) && (a = String(a).replace(/\-/g, "/")), new Date(a); throw new Error("Couldn't cast `" + a + "` to a date object.") } function c(a) { var b = a.toString().replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1"); return new RegExp(b) } function d(a) { return function (b) { var d = b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi); if (d) for (var f = 0, g = d.length; f < g; ++f) { var h = d[f].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/), j = c(h[0]), k = h[1] || "", l = h[3] || "", m = null; h = h[2], i.hasOwnProperty(h) && (m = i[h], m = Number(a[m])), null !== m && ("!" === k && (m = e(l, m)), "" === k && m < 10 && (m = "0" + m.toString()), b = b.replace(j, m.toString())) } return b = b.replace(/%%/, "%") } } function e(a, b) { var c = "s", d = ""; return a && (a = a.replace(/(:|;|\s)/gi, "").split(/\,/), 1 === a.length ? c = a[0] : (d = a[0], c = a[1])), Math.abs(b) > 1 ? c : d } var f = [], g = [], h = { precision: 100, elapse: !1, defer: !1 }; g.push(/^[0-9]*$/.source), g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source), g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source), g = new RegExp(g.join("|")); var i = { Y: "years", m: "months", n: "daysToMonth", d: "daysToWeek", w: "weeks", W: "weeksToMonth", H: "hours", M: "minutes", S: "seconds", D: "totalDays", I: "totalHours", N: "totalMinutes", T: "totalSeconds" }, j = function (b, c, d) { this.el = b, this.$el = a(b), this.interval = null, this.offset = {}, this.options = a.extend({}, h), this.instanceNumber = f.length, f.push(this), this.$el.data("countdown-instance", this.instanceNumber), d && ("function" == typeof d ? (this.$el.on("update.countdown", d), this.$el.on("stoped.countdown", d), this.$el.on("finish.countdown", d)) : this.options = a.extend({}, h, d)), this.setFinalDate(c), this.options.defer === !1 && this.start() }; a.extend(j.prototype, { start: function () { null !== this.interval && clearInterval(this.interval); var a = this; this.update(), this.interval = setInterval(function () { a.update.call(a) }, this.options.precision) }, stop: function () { clearInterval(this.interval), this.interval = null, this.dispatchEvent("stoped") }, toggle: function () { this.interval ? this.stop() : this.start() }, pause: function () { this.stop() }, resume: function () { this.start() }, remove: function () { this.stop.call(this), f[this.instanceNumber] = null, delete this.$el.data().countdownInstance }, setFinalDate: function (a) { this.finalDate = b(a) }, update: function () { if (0 === this.$el.closest("html").length) return void this.remove(); var b, c = void 0 !== a._data(this.el, "events"), d = new Date; b = this.finalDate.getTime() - d.getTime(), b = Math.ceil(b / 1e3), b = !this.options.elapse && b < 0 ? 0 : Math.abs(b), this.totalSecsLeft !== b && c && (this.totalSecsLeft = b, this.elapsed = d >= this.finalDate, this.offset = { seconds: this.totalSecsLeft % 60, minutes: Math.floor(this.totalSecsLeft / 60) % 60, hours: Math.floor(this.totalSecsLeft / 60 / 60) % 24, days: Math.floor(this.totalSecsLeft / 60 / 60 / 24) % 7, daysToWeek: Math.floor(this.totalSecsLeft / 60 / 60 / 24) % 7, daysToMonth: Math.floor(this.totalSecsLeft / 60 / 60 / 24 % 30.4368), weeks: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 7), weeksToMonth: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 7) % 4, months: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 30.4368), years: Math.abs(this.finalDate.getFullYear() - d.getFullYear()), totalDays: Math.floor(this.totalSecsLeft / 60 / 60 / 24), totalHours: Math.floor(this.totalSecsLeft / 60 / 60), totalMinutes: Math.floor(this.totalSecsLeft / 60), totalSeconds: this.totalSecsLeft }, this.options.elapse || 0 !== this.totalSecsLeft ? this.dispatchEvent("update") : (this.stop(), this.dispatchEvent("finish"))) }, dispatchEvent: function (b) { var c = a.Event(b + ".countdown"); c.finalDate = this.finalDate, c.elapsed = this.elapsed, c.offset = a.extend({}, this.offset), c.strftime = d(this.offset), this.$el.trigger(c) } }), a.fn.countdown = function () { var b = Array.prototype.slice.call(arguments, 0); return this.each(function () { var c = a(this).data("countdown-instance"); if (void 0 !== c) { var d = f[c], e = b[0]; j.prototype.hasOwnProperty(e) ? d[e].apply(d, b.slice(1)) : null === String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i) ? (d.setFinalDate.call(d, e), d.start()) : a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi, e)) } else new j(this, b[0], b[1]) }) } });</script>
  <script>
    window.onscroll = function (e) {

      e.preventDefault();

      let scroll = window.scrollY;

      var Scroll = document.querySelector("#efec-scroll");
      var ulone = document.querySelector("#ulone");
      var ultwu = document.querySelector("#ultwu");
      var logo = document.getElementById("logo");

      if (scroll > 50) {
        Scroll.classList.add("bg-menu");
        ulone.classList.add("nav-scroll");
        ultwu.classList.add("nav-scroll");
        logo.classList.add("logo");
      } else {
        Scroll.classList.remove("bg-menu");
        ulone.classList.remove("nav-scroll");
        ultwu.classList.remove("nav-scroll");
        logo.classList.remove("logo");
      }
    };
  </script>
  <script>
    function addToCart(heartLink, product_data) {
      if (!heartLink.firstElementChild.classList.contains("clicked-heart")) {
        heartLink.firstElementChild.classList.add("clicked-heart");
        let post_data = new URLSearchParams();
        product_data = JSON.parse(product_data)
        for (k in product_data)
          post_data.append(k, product_data[k])
        fetch("/add-wishlist-item", {
          method: 'post',
          body: post_data,
        }).then(result => console.log(result)).catch(error => console.error(error))
      } else {
        heartLink.firstElementChild.classList.remove("clicked-heart");
      }
    }
  </script>
</body>

</html>
